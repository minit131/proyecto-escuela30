<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#87CEEB">
    <title>Portal del Colegio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Modal de Login -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 id="modal-title">Iniciar Sesión</h2>
            
            <!-- Formulario de Login -->
            <div id="login-form" class="auth-form">
                <input type="text" id="login-username" placeholder="Usuario">
                <input type="password" id="login-password" placeholder="Contraseña">
                <button onclick="login()">Iniciar Sesión</button>
                <p>¿No tienes cuenta? <a href="#" onclick="showRegister()">Regístrate aquí</a></p>
            </div>

            <!-- Formulario de Registro -->
            <div id="register-form" class="auth-form hidden">
                <input type="text" id="register-username" placeholder="Usuario">
                <input type="email" id="register-email" placeholder="Email">
                <input type="password" id="register-password" placeholder="Contraseña">
                <input type="password" id="register-confirm" placeholder="Confirmar contraseña">
                <button onclick="register()">Registrarse</button>
                <p>¿Ya tienes cuenta? <a href="#" onclick="showLogin()">Inicia sesión aquí</a></p>
            </div>
        </div>
    </div>

    <!-- Barra de navegación superior -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>🎓 Colegio 30 Victor Mercante</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#noticias">Noticias</a></li>
                <li><a href="#eventos">Eventos</a></li>
                <li><a href="#galeria">Galería</a></li>
                <li><a href="#contacto">Contacto</a></li>
                <li id="auth-button"><a href="#" onclick="openLoginModal()">Iniciar Sesión</a></li>
            </ul>
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Panel de usuario logueado -->
    <div id="user-panel" class="user-panel hidden">
        <div class="user-info">
            <span id="welcome-user">Bienvenido, Usuario</span>
            <span id="user-role" class="role-badge">Usuario</span>
        </div>
        <div class="user-actions">
            <button id="admin-panel-btn" class="hidden" onclick="toggleAdminPanel()">Panel Admin</button>
            <button onclick="logout()">Cerrar Sesión</button>
        </div>
    </div>

    <!-- Contenido principal -->
    <main class="main-content">
        <!-- Panel de administración -->
        <div id="admin-panel" class="admin-panel hidden">
            <div class="admin-header">
                <h3>📝 Panel de Administración</h3>
                <button class="close-btn" onclick="toggleAdminPanel()">×</button>
            </div>
            
            <!-- Tabs de administración -->
            <div class="admin-tabs">
                <button class="tab-btn active" onclick="showTab('news-tab', event)">Gestionar Noticias</button>
                <button class="tab-btn" onclick="showTab('users-tab', event)">Gestionar Usuarios</button>
            </div>

            <!-- Tab de Noticias -->
            <div id="news-tab" class="tab-content">
                <div class="admin-form">
                    <h4>Publicar Nueva Noticia</h4>
                    <input type="text" id="news-title" placeholder="Título de la noticia">
                    <textarea id="news-content" placeholder="Contenido de la noticia" rows="4"></textarea>
                    <div class="file-uploads">
                        <div class="upload-group">
                            <label for="image-upload">📷 Subir Imagen:</label>
                            <input type="file" id="image-upload" accept="image/*">
                        </div>
                        <div class="upload-group">
                            <label for="audio-upload">🎵 Subir Audio:</label>
                            <input type="file" id="audio-upload" accept="audio/*">
                        </div>
                    </div>
                    <button onclick="addNews()" class="publish-btn">📤 Publicar Noticia</button>
                </div>

                <div class="news-management">
                    <h4>Noticias Publicadas</h4>
                    <div id="admin-news-list" class="admin-news-list">
                        <!-- Noticias dinámicas -->
                    </div>
                </div>
            </div>

            <!-- Tab de Usuarios -->
            <div id="users-tab" class="tab-content hidden">
                <div class="users-management">
                    <h4>Gestión de Usuarios</h4>
                    <div id="users-list" class="users-list"></div>
                </div>
            </div>
        </div>

        <!-- Sección de bienvenida -->
        <section class="hero-section">
            <div class="hero-content">
                <h1>🌟 Bienvenidos al Portal del Colegio</h1>
                <p>Mantente informado sobre todas las novedades y eventos de nuestra institución educativa</p>
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-number" id="news-count">2</span>
                        <span class="stat-label">Noticias</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">500+</span>
                        <span class="stat-label">Estudiantes</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">25</span>
                        <span class="stat-label">Profesores</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de noticias -->
        <section class="news-section" id="noticias">
            <div class="container">
                <h2>📰 Últimas Noticias</h2>
                <div id="news-container" class="news-grid">
                    <!-- Ejemplos iniciales -->
                    <div class="news-card" data-news-id="1">
                        <div class="news-header">
                            <h3>🎓 Bienvenida al nuevo año escolar</h3>
                            <div class="news-actions hidden">
                                <button class="delete-btn" onclick="deleteNews(1)">🗑️</button>
                            </div>
                        </div>
                        <p>Damos la bienvenida a todos nuestros estudiantes al nuevo período académico 2025.</p>
                        <div class="news-meta">
                            <span class="date">📅 10 de Agosto, 2025</span>
                            <span class="author">👤 Administrador</span>
                        </div>
                    </div>
                    <div class="news-card" data-news-id="2">
                        <div class="news-header">
                            <div class="news-actions hidden">
                                <button class="delete-btn" onclick="deleteNews(2)">🗑️</button>
                            </div>
                        </div>
                        <div class="news-meta">
                            <span class="date">📅 5 de Agosto, 2025</span>
                            <span class="author">👤 Administrador</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>📍 Contacto</h3>
                    <p>📧 info@colegiovictor.edu.ar</p>
                    <p>📞 (011) 4567-8900</p>
                    <p>🏠 andonaegui 2231, Buenos Aires</p>
                </div>
                <div class="footer-section">
                    <h3>⏰ Horarios</h3>
                    <p>📅 Lunes a Viernes: 7:00 - 18:00</p>
                    <p>📅 Sábados: 8:00 - 12:00</p>
                </div>
                <div class="footer-section">
                    <h3>🌐 Síguenos</h3>
                    <p>📱 Facebook | Instagram | Twitter</p>
                    <p>💻 Portal Educativo Online</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Colegio 30 Victor Mercante. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        let users = {};
        try {
            users = JSON.parse(localStorage.getItem('school_users')) || {};
        } catch (e) {
            users = {};
        }
        let currentUser = null;
        let newsIdCounter = 3;

        if (Object.keys(users).length === 0) {
            users['admin'] = {
                username: 'admin',
                email: 'admin@colegio.edu',
                password: 'admin123',
                role: 'admin',
                created: new Date().toISOString()
            };
            localStorage.setItem('school_users', JSON.stringify(users));
        }

        function openLoginModal() {
            document.getElementById('login-modal').classList.remove('hidden');
            showLogin();
        }
        function closeModal() {
            document.getElementById('login-modal').classList.add('hidden');
        }
        function showLogin() {
            document.getElementById('modal-title').textContent = 'Iniciar Sesión';
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('register-form').classList.add('hidden');
        }
        function showRegister() {
            document.getElementById('modal-title').textContent = 'Crear Cuenta';
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('register-form').classList.remove('hidden');
        }

        function showTab(tabId, event) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.remove('hidden');
            event.target.classList.add('active');
        }

        function login() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            if (!username || !password) {
                alert('Por favor, completa todos los campos');
                return;
            }
            if (users[username] && users[username].password === password) {
                currentUser = users[username];
                updateUI();
                closeModal();
                alert('¡Bienvenido, ' + username + '!');
            } else {
                alert('Usuario o contraseña incorrectos');
            }
        }
        function register() {
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            if (!username || !email || !password || !confirm) {
                alert('Por favor, completa todos los campos');
                return;
            }
            if (password !== confirm) {
                alert('Las contraseñas no coinciden');
                return;
            }
            if (users[username]) {
                alert('El usuario ya existe');
                return;
            }
            users[username] = { username, email, password, role: 'user', created: new Date().toISOString() };
            localStorage.setItem('school_users', JSON.stringify(users));
            alert('Cuenta creada exitosamente. Ahora puedes iniciar sesión.');
            showLogin();
        }
        function logout() {
            currentUser = null;
            updateUI();
            alert('Sesión cerrada exitosamente');
        }

        function updateUI() {
            const authButton = document.getElementById('auth-button');
            const userPanel = document.getElementById('user-panel');
            const adminPanelBtn = document.getElementById('admin-panel-btn');
            const newsActions = document.querySelectorAll('.news-actions');
            if (currentUser) {
                authButton.classList.add('hidden');
                userPanel.classList.remove('hidden');
                document.getElementById('welcome-user').textContent = `Bienvenido, ${currentUser.username}`;
                document.getElementById('user-role').textContent = currentUser.role === 'admin' ? 'Administrador' : 'Usuario';
                document.getElementById('user-role').className = `role-badge ${currentUser.role}`;
                if (currentUser.role === 'admin') {
                    adminPanelBtn.classList.remove('hidden');
                    newsActions.forEach(action => action.classList.remove('hidden'));
                } else {
                    adminPanelBtn.classList.add('hidden');
                    newsActions.forEach(action => action.classList.add('hidden'));
                }
            } else {
                authButton.classList.remove('hidden');
                userPanel.classList.add('hidden');
                document.getElementById('admin-panel').classList.add('hidden');
                newsActions.forEach(action => action.classList.add('hidden'));
            }
        }

        function toggleAdminPanel() {
            const panel = document.getElementById('admin-panel');
            panel.classList.toggle('hidden');
        }

        function toggleMenu() {
            const navMenu = document.querySelector('.nav-menu');
            navMenu.classList.toggle('active');
        }

        document.addEventListener('DOMContentLoaded', updateUI);
    </script>
</body>
</html>

